<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>乳酸菌摂ってるぅ？</title>
  <meta id="viewport" name="viewport" content="width=1280, user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="author" content="LiviaMedeiros" />
  <meta name="theme-color" content="#6d4e88" />
  <meta name="description" content="Suigintou no Corner" />
  <link rel="canonical" href="https://ennui.suigintou.name/" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="icon" type="image/png" sizes="360x360" href="/img/ennui360.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="/img/ennui192.png" />
  <link rel="icon" type="image/png" sizes="128x128" href="/img/ennui128.png" />
  <link rel="icon" type="image/png" sizes="64x64" href="/img/ennui64.png" />
  <script type="module" src="/js/ennui.mjs"></script>
  <script type="module">import S from '/js/ennui.mjs';
   ((d,f,w) => d.addEventListener("DOMContentLoaded", () => ((_,g,b,[l,x]) => ($ => ([
    [_, 'timeupdate', () => x.style.transform = 'rotate('+_.currentTime/_.duration+'turn)'],
    [_, 'ended', $.next],
    [_, 'volumechange', () => x.style.opacity = _.volume],
    [_, 'pause', () => (b.remove('play'), b.add('pause'))],
    [_, 'play',  () => (b.remove('pause'), b.add('play'))],
    [_, 'loadeddata', l.remove.bind(l)],
    [d, 'click', $.tggl],
    [d, 'keydown', ({key:e}) => /^\d$/.test(e)?$.mset(e/10):(([f,...p])=>$[f]&&$[f](...p))({
     ArrowRight:['madd',10],ArrowDown:['vadd',-.1],
     ArrowLeft:['madd',-10],ArrowUp:['vadd',.1],' '
     :['tggl',null]}[e]||[])]
   ].forEach(([o,...e]) => o.addEventListener(...e)), $.next()))({
    tggl: e => _.paused ? _.play().catch(console.warn) : _.pause(),
    vadd: e => _.volume = f(_.volume+e),
    madd: e => _.currentTime = f(_.currentTime+e,_.duration||0),
    mset: e => _.currentTime = f(e)*_.duration,
    next: e => g.next().value
     .then(r => r.json())
     .then(({name,body}) => (
      x.title = name,
      _.src = atob('ZGF0YTphdWRpby9vZ2c7YmFzZTY0LA==')+body,
      _.play()))
     .catch(console.warn)
    }))(new Audio,w.w(S),d.body.classList,['lampe','cross'].map(d.getElementById.bind(d))
    ),{once:true}))(document,(c,b=1,a=0)=>c<b?c>a?c:a:b,{*r(b,r=Math.random,s='reverse'){
    for(let q;q=b[s]().length;yield*b)while(--q)(d=>[b[q],b[d]]=[b[d],b[q]])(0|q*r());},*
    w(g){g=this.f(g);let c=g.next().value;for(const r of g){yield c;c=r;}},*f(g,s={cache:
    'force-cache'},u='/js/',l='.json'){for(const r of this.r(g))yield fetch(u+r+l,s);}});
  </script>
  <style>
   @keyframes meimei{from{filter:hue-rotate(0)}to{filter:hue-rotate(-90deg)}}
   html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;cursor:cell}
   .pause{cursor:col-resize}
   #mercury{width:100%;height:100%;text-align:center;position:fixed;background:fixed #fff url(/img/gin.webp) left bottom no-repeat;animation:90s linear 0s infinite alternate none paused meimei}
   .play #mercury{animation-play-state:running}
   #lampe{width:100%;height:100%;position:fixed;background:rgba(0,0,0,.5);cursor:wait;z-index:999}
   #ennui{position:fixed;width:240px;height:240px;border-radius:50%;left:80%;top:50%;margin-top:-120px;margin-left:-120px;opacity:.8;background:radial-gradient(#eee 0%,transparent 80%,transparent 100%)}
   #cross{width:240px;height:320px;position:fixed;left:80%;top:50%;margin-left:-120px;margin-top:-190px;cursor:none;transition:1s linear all;transform-origin:50% 59.375%}
   .pause #cross{filter:grayscale(1)}
   #vect{fill:#000;stroke:#408;stroke-width:3px}
  </style>
 </head>
 <body>
  <div id="mercury"></div>
  <div id="lampe"></div>
  <div id="ennui"><div id="cross"><svg id="vect" viewBox="0 0 480 640"><path id="way" d="M220 80a16 16 0 0 0-18-16a24 24 0 0 1 38 0a24 24 0 0 1 38 0a16 16 0 0 0-18 16v280h160a16 16 0 0 0 16-18a24 24 0 0 1 0 38a24 24 0 0 1 0 38a16 16 0 0 0-16-18h-160v160a16 16 0 0 0 18 16a24 24 0 0 1-38 0a24 24 0 0 1-38 0a16 16 0 0 0 18-16v-160h-160a16 16 0 0 0-16 18a24 24 0 0 1 0-38a24 24 0 0 1 0-38a16 16 0 0 0 16 18h160zM235 80v295h-175v10h175v175h10v-175h175v-10h-175v-295z"/></svg></div></div>
 </body>
</html>
